# Knowledge Base
facts = {"Man(Marcus)", "Pompeian(Marcus)"}

rules = [
    ("Pompeian(x)", "Roman(x)"),
    ("Roman(x)", "Loyal(x)"),
    ("Man(x)", "Person(x)"),
    ("Person(x)", "Mortal(x)")
]

query = "Mortal(Marcus)"

def substitute(rule, var, const):
    """Replace variable with constant in a rule."""
    premise, conclusion = rule
    return premise.replace(var, const), conclusion.replace(var, const)

def forward_chain():
    print("Forward Chaining Proof: KB ⊢ Mortal(Marcus)\n")
    derived = set(facts)
    new_inferred = True

    while new_inferred:
        new_inferred = False
        for rule in rules:
            premise, conclusion = substitute(rule, "x", "Marcus")
            if premise in derived and conclusion not in derived:
                print(f"From {premise} and {rule[0]}→{rule[1]}, infer {conclusion}")
                derived.add(conclusion)
                new_inferred = True

    print("\nAll inferred facts:")
    for f in derived:
        print(" -", f)

    if query in derived:
        print(f"\n✅ Query proved: {query} is TRUE.")
    else:
        print(f"\n❌ Query cannot be proved from the KB.")

forward_chain()
